Const = type (value: Int)
AddOp = type (left: Const, right: Const)

# Const eval is not defined yet

extend AddOp (
  eval: (this) => () => (this.left | eval) + (this.right | eval)
)

extend Const (
  eval: (this) => () => this.value
)

program = AddOp (
  left: Const (value: 2)
  right: Const (value: 3)
)

print $ program | eval
