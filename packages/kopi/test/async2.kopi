# generator = spawn () => {
#   loop = () => {
#     sleep 1
#     yield x => x
#     loop ()
#   }
#   loop ()
# }

# print $ "> " ++ send generator 1
# print $ "> " ++ send generator 2

generator = spawn () => {
  loop = (x) => {
    sleep 1
    yield2 _ => x
    loop (x + 1)
  }
  loop (1)
}

# TODO: Map is not yet async
print $ 1..3 | map (n) => {
  send generator ()
}

# print $ send generator ()
# print $ send generator ()
# print $ send generator ()
