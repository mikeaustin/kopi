print ""
print "== interpret ====================================="
print ""

source = "
  10 PRINT 'HELLO'
  20 GOTO 10
"

program = source | trim | xsplit (char 13) | _map 'trim

print program
print ""

interpret = program => {
  program | _map (line) => {
    match (tuple $ line | xsplit " ") (
      line, "PRINT", value => print $ value
      line, "GOTO", goto   => print $ "GOTO " ++ goto ++ ": NOT IMPLEMENTED"
      line, command        => print $ "*** UNKNOWN COMMAND '" ++ command ++ "' ON LINE " ++ line
    )
  }
}

interpret program
