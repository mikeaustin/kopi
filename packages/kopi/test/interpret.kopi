source = "
  10 PRINT 'HELLO'
  20 GOTO 10
"

program = source | trim | xsplit (char 13) | xmap 'trim

print program
print ""

interpret = program => {
  program | xmap (line) => {
    match (tuple $ line | xsplit " ") (
      line, "PRINT", value => print value
      line, "GOTO", goto   => print $ "GOTO " ++ goto ++ ": NOT IMPLEMENTED"
      _                    => print "*** UNKNOWN COMMAND ***"
    )
  }
}

interpret program
