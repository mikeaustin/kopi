{"version":3,"file":"jss-plugin-expand.js","sources":["../src/props.js","../src/index.js"],"sourcesContent":["/**\n * A scheme for converting properties from array to regular style.\n * All properties listed below will be transformed to a string separated by space.\n */\nexport const propArray = {\n  'background-size': true,\n  'background-position': true,\n  border: true,\n  'border-bottom': true,\n  'border-left': true,\n  'border-top': true,\n  'border-right': true,\n  'border-radius': true,\n  'border-image': true,\n  'border-width': true,\n  'border-style': true,\n  'border-color': true,\n  'box-shadow': true,\n  flex: true,\n  margin: true,\n  padding: true,\n  outline: true,\n  'transform-origin': true,\n  transform: true,\n  transition: true\n}\n\n/**\n * A scheme for converting arrays to regular styles inside of objects.\n * For e.g.: \"{position: [0, 0]}\" => \"background-position: 0 0;\".\n */\nexport const propArrayInObj = {\n  position: true, // background-position\n  size: true // background-size\n}\n\n/**\n * A scheme for parsing and building correct styles from passed objects.\n */\nexport const propObj = {\n  padding: {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  },\n  margin: {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  },\n  background: {\n    attachment: null,\n    color: null,\n    image: null,\n    position: null,\n    repeat: null\n  },\n  border: {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-top': {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-right': {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-bottom': {\n    width: null,\n    style: null,\n    color: null\n  },\n  'border-left': {\n    width: null,\n    style: null,\n    color: null\n  },\n  outline: {\n    width: null,\n    style: null,\n    color: null\n  },\n  'list-style': {\n    type: null,\n    position: null,\n    image: null\n  },\n  transition: {\n    property: null,\n    duration: null,\n    'timing-function': null,\n    timingFunction: null, // Needed for avoiding comilation issues with jss-plugin-camel-case\n    delay: null\n  },\n  animation: {\n    name: null,\n    duration: null,\n    'timing-function': null,\n    timingFunction: null, // Needed to avoid compilation issues with jss-plugin-camel-case\n    delay: null,\n    'iteration-count': null,\n    iterationCount: null, // Needed to avoid compilation issues with jss-plugin-camel-case\n    direction: null,\n    'fill-mode': null,\n    fillMode: null, // Needed to avoid compilation issues with jss-plugin-camel-case\n    'play-state': null,\n    playState: null // Needed to avoid compilation issues with jss-plugin-camel-case\n  },\n  'box-shadow': {\n    x: 0,\n    y: 0,\n    blur: 0,\n    spread: 0,\n    color: null,\n    inset: null\n  },\n  'text-shadow': {\n    x: 0,\n    y: 0,\n    blur: null,\n    color: null\n  }\n}\n\n/**\n * A scheme for converting non-standart properties inside object.\n * For e.g.: include 'border-radius' property inside 'border' object.\n */\nexport const customPropObj = {\n  border: {\n    radius: 'border-radius',\n    image: 'border-image',\n    width: 'border-width',\n    style: 'border-style',\n    color: 'border-color'\n  },\n  'border-bottom': {\n    width: 'border-bottom-width',\n    style: 'border-bottom-style',\n    color: 'border-bottom-color'\n  },\n  'border-top': {\n    width: 'border-top-width',\n    style: 'border-top-style',\n    color: 'border-top-color'\n  },\n  'border-left': {\n    width: 'border-left-width',\n    style: 'border-left-style',\n    color: 'border-left-color'\n  },\n  'border-right': {\n    width: 'border-right-width',\n    style: 'border-right-style',\n    color: 'border-right-color'\n  },\n  background: {\n    size: 'background-size',\n    image: 'background-image'\n  },\n  font: {\n    style: 'font-style',\n    variant: 'font-variant',\n    weight: 'font-weight',\n    stretch: 'font-stretch',\n    size: 'font-size',\n    family: 'font-family',\n    lineHeight: 'line-height', // Needed to avoid compilation issues with jss-plugin-camel-case\n    'line-height': 'line-height'\n  },\n  flex: {\n    grow: 'flex-grow',\n    basis: 'flex-basis',\n    direction: 'flex-direction',\n    wrap: 'flex-wrap',\n    flow: 'flex-flow',\n    shrink: 'flex-shrink'\n  },\n  align: {\n    self: 'align-self',\n    items: 'align-items',\n    content: 'align-content'\n  },\n  grid: {\n    'template-columns': 'grid-template-columns',\n    templateColumns: 'grid-template-columns',\n\n    'template-rows': 'grid-template-rows',\n    templateRows: 'grid-template-rows',\n\n    'template-areas': 'grid-template-areas',\n    templateAreas: 'grid-template-areas',\n\n    template: 'grid-template',\n\n    'auto-columns': 'grid-auto-columns',\n    autoColumns: 'grid-auto-columns',\n\n    'auto-rows': 'grid-auto-rows',\n    autoRows: 'grid-auto-rows',\n\n    'auto-flow': 'grid-auto-flow',\n    autoFlow: 'grid-auto-flow',\n\n    row: 'grid-row',\n    column: 'grid-column',\n\n    'row-start': 'grid-row-start',\n    rowStart: 'grid-row-start',\n    'row-end': 'grid-row-end',\n    rowEnd: 'grid-row-end',\n\n    'column-start': 'grid-column-start',\n    columnStart: 'grid-column-start',\n    'column-end': 'grid-column-end',\n    columnEnd: 'grid-column-end',\n\n    area: 'grid-area',\n    gap: 'grid-gap',\n\n    'row-gap': 'grid-row-gap',\n    rowGap: 'grid-row-gap',\n\n    'column-gap': 'grid-column-gap',\n    columnGap: 'grid-column-gap'\n  }\n}\n","/* eslint-disable no-use-before-define */\nimport {propArray, propArrayInObj, propObj, customPropObj} from './props'\n\n/**\n * Map values by given prop.\n *\n * @param {Array} array of values\n * @param {String} original property\n * @param {String} original rule\n * @return {String} mapped values\n */\nfunction mapValuesByProp(value, prop, rule) {\n  return value.map((item) => objectToArray(item, prop, rule, false, true))\n}\n\n/**\n * Convert array to nested array, if needed\n */\nfunction processArray(value, prop, scheme, rule) {\n  if (scheme[prop] == null) return value\n  if (value.length === 0) return []\n  if (Array.isArray(value[0])) return processArray(value[0], prop, scheme, rule)\n  if (typeof value[0] === 'object') {\n    return mapValuesByProp(value, prop, rule)\n  }\n\n  return [value]\n}\n\n/**\n * Convert object to array.\n */\nfunction objectToArray(value, prop, rule, isFallback, isInArray) {\n  if (!(propObj[prop] || customPropObj[prop])) return []\n\n  const result = []\n\n  // Check if exists any non-standard property\n  if (customPropObj[prop]) {\n    // eslint-disable-next-line no-param-reassign\n    value = customPropsToStyle(value, rule, customPropObj[prop], isFallback)\n  }\n\n  // Pass throught all standart props\n  if (Object.keys(value).length) {\n    for (const baseProp in propObj[prop]) {\n      if (value[baseProp]) {\n        if (Array.isArray(value[baseProp])) {\n          result.push(\n            propArrayInObj[baseProp] === null ? value[baseProp] : value[baseProp].join(' ')\n          )\n        } else result.push(value[baseProp])\n        continue\n      }\n\n      // Add default value from props config.\n      if (propObj[prop][baseProp] != null) {\n        result.push(propObj[prop][baseProp])\n      }\n    }\n  }\n\n  if (!result.length || isInArray) return result\n  return [result]\n}\n\n/**\n * Convert custom properties values to styles adding them to rule directly\n */\nfunction customPropsToStyle(value, rule, customProps, isFallback) {\n  for (const prop in customProps) {\n    const propName = customProps[prop]\n\n    // If current property doesn't exist already in rule - add new one\n    if (typeof value[prop] !== 'undefined' && (isFallback || !rule.prop(propName))) {\n      const appendedValue = styleDetector(\n        {\n          [propName]: value[prop]\n        },\n        rule\n      )[propName]\n\n      // Add style directly in rule\n      if (isFallback) rule.style.fallbacks[propName] = appendedValue\n      else rule.style[propName] = appendedValue\n    }\n    // Delete converted property to avoid double converting\n    delete value[prop]\n  }\n\n  return value\n}\n\n/**\n * Detect if a style needs to be converted.\n */\nfunction styleDetector(style, rule, isFallback) {\n  for (const prop in style) {\n    const value = style[prop]\n\n    if (Array.isArray(value)) {\n      // Check double arrays to avoid recursion.\n      if (!Array.isArray(value[0])) {\n        if (prop === 'fallbacks') {\n          for (let index = 0; index < style.fallbacks.length; index++) {\n            style.fallbacks[index] = styleDetector(style.fallbacks[index], rule, true)\n          }\n          continue\n        }\n\n        style[prop] = processArray(value, prop, propArray, rule)\n        // Avoid creating properties with empty values\n        if (!style[prop].length) delete style[prop]\n      }\n    } else if (typeof value === 'object') {\n      if (prop === 'fallbacks') {\n        style.fallbacks = styleDetector(style.fallbacks, rule, true)\n        continue\n      }\n\n      style[prop] = objectToArray(value, prop, rule, isFallback)\n      // Avoid creating properties with empty values\n      if (!style[prop].length) delete style[prop]\n    }\n\n    // Maybe a computed value resulting in an empty string\n    else if (style[prop] === '') delete style[prop]\n  }\n\n  return style\n}\n\n/**\n * Adds possibility to write expanded styles.\n */\nexport default function jssExpand() {\n  function onProcessStyle(style, rule) {\n    if (!style || rule.type !== 'style') return style\n\n    if (Array.isArray(style)) {\n      // Pass rules one by one and reformat them\n      for (let index = 0; index < style.length; index++) {\n        style[index] = styleDetector(style[index], rule)\n      }\n      return style\n    }\n\n    return styleDetector(style, rule)\n  }\n\n  return {onProcessStyle}\n}\n"],"names":["propArray","border","flex","margin","padding","outline","transform","transition","propArrayInObj","position","size","propObj","top","right","bottom","left","background","attachment","color","image","repeat","width","style","type","property","duration","timingFunction","delay","animation","name","iterationCount","direction","fillMode","playState","x","y","blur","spread","inset","customPropObj","radius","font","variant","weight","stretch","family","lineHeight","grow","basis","wrap","flow","shrink","align","self","items","content","grid","templateColumns","templateRows","templateAreas","template","autoColumns","autoRows","autoFlow","row","column","rowStart","rowEnd","columnStart","columnEnd","area","gap","rowGap","columnGap","mapValuesByProp","value","prop","rule","map","item","objectToArray","processArray","scheme","length","Array","isArray","isFallback","isInArray","result","customPropsToStyle","Object","keys","baseProp","push","join","customProps","propName","appendedValue","styleDetector","fallbacks","index","jssExpand","onProcessStyle"],"mappings":"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"}