{"version":3,"file":"jss-plugin-extend.js","sources":["../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../../node_modules/tiny-warning/dist/tiny-warning.esm.js","../src/index.js"],"sourcesContent":["export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","var isProduction = process.env.NODE_ENV === 'production';\nfunction warning(condition, message) {\n  if (!isProduction) {\n    if (condition) {\n      return;\n    }\n\n    var text = \"Warning: \" + message;\n\n    if (typeof console !== 'undefined') {\n      console.warn(text);\n    }\n\n    try {\n      throw Error(text);\n    } catch (x) {}\n  }\n}\n\nexport default warning;\n","/* eslint-disable no-use-before-define */\nimport warning from 'tiny-warning'\n\nconst isObject = (obj) => obj && typeof obj === 'object' && !Array.isArray(obj)\nconst valueNs = `extendCurrValue${Date.now()}`\n\nfunction mergeExtend(style, rule, sheet, newStyle) {\n  const extendType = typeof style.extend\n  // Extend using a rule name.\n  if (extendType === 'string') {\n    if (!sheet) return\n    const refRule = sheet.getRule(style.extend)\n    if (!refRule) return\n    if (refRule === rule) {\n      warning(false, `[JSS] A rule tries to extend itself \\n${rule.toString()}`)\n      return\n    }\n    const {parent} = refRule.options\n    if (parent) {\n      const originalStyle = parent.rules.raw[style.extend]\n      extend(originalStyle, rule, sheet, newStyle)\n    }\n    return\n  }\n\n  // Extend using an array.\n  if (Array.isArray(style.extend)) {\n    for (let index = 0; index < style.extend.length; index++) {\n      const singleExtend = style.extend[index]\n      const singleStyle =\n        typeof singleExtend === 'string' ? {...style, extend: singleExtend} : style.extend[index]\n      extend(singleStyle, rule, sheet, newStyle)\n    }\n    return\n  }\n\n  // Extend is a style object.\n  for (const prop in style.extend) {\n    if (prop === 'extend') {\n      extend(style.extend.extend, rule, sheet, newStyle)\n      continue\n    }\n    if (isObject(style.extend[prop])) {\n      if (!(prop in newStyle)) newStyle[prop] = {}\n      extend(style.extend[prop], rule, sheet, newStyle[prop])\n      continue\n    }\n    newStyle[prop] = style.extend[prop]\n  }\n}\n\nfunction mergeRest(style, rule, sheet, newStyle) {\n  // Copy base style.\n  for (const prop in style) {\n    if (prop === 'extend') continue\n    if (isObject(newStyle[prop]) && isObject(style[prop])) {\n      extend(style[prop], rule, sheet, newStyle[prop])\n      continue\n    }\n\n    if (isObject(style[prop])) {\n      newStyle[prop] = extend(style[prop], rule, sheet)\n      continue\n    }\n\n    newStyle[prop] = style[prop]\n  }\n}\n\n/**\n * Recursively extend styles.\n */\nfunction extend(style, rule, sheet, newStyle = {}) {\n  mergeExtend(style, rule, sheet, newStyle)\n  mergeRest(style, rule, sheet, newStyle)\n  return newStyle\n}\n\n/**\n * Handle `extend` property.\n */\nexport default function jssExtend() {\n  function onProcessStyle(style, rule, sheet) {\n    if ('extend' in style) return extend(style, rule, sheet)\n    return style\n  }\n\n  function onChangeValue(value, prop, rule) {\n    if (prop !== 'extend') return value\n\n    // Value is empty, remove properties set previously.\n    if (value == null || value === false) {\n      for (const key in rule[valueNs]) {\n        rule.prop(key, null)\n      }\n      rule[valueNs] = null\n      return null\n    }\n\n    if (typeof value === 'object') {\n      for (const key in value) {\n        rule.prop(key, value[key])\n      }\n\n      rule[valueNs] = value\n    }\n\n    // Make sure we don't set the value in the core.\n    return null\n  }\n\n  return {onProcessStyle, onChangeValue}\n}\n"],"names":["isObject","obj","Array","isArray","valueNs","Date","now","mergeExtend","style","rule","sheet","newStyle","extendType","extend","refRule","getRule","warning","toString","parent","options","originalStyle","rules","raw","index","length","singleExtend","singleStyle","prop","mergeRest","jssExtend","onProcessStyle","onChangeValue","value","key"],"mappings":"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"}